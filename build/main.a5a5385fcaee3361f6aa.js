!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=35)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(38),r=n(39),s=n(40),a=n(41),o=n(42);class l{constructor(){}static getInstance(){return void 0===this._instance&&(this._instance=new l,this._instance._spriteSheets=new Map,this._instance.init()),this._instance}init(){let e=new i.SpriteSheet(s);e.load(r),this.register("players",e);let t=new i.SpriteSheet(o);t.load(a),this.register("level",t),console.log("Loaded sprite sheets")}register(e,t){console.log("Sprite Sheet ->"+e+" = "+t),this._spriteSheets.set(e,t)}getSpriteSheet(e){return this._spriteSheets.get(e)}}t.SpriteSheetManager=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(24);t.GameEntity=class{constructor(e){this._id=i.IdGenerator.nextId(),this._name=e,this._componentMap=new Map}setId(e){this._id=e}getId(){return this._id}getName(){return this._name}addComponent(e){this._componentMap.set(e.name(),e)}getComponent(e){return this._componentMap.get(e)}removeComponent(e){this._componentMap.delete(e)}hasComponent(e){return this._componentMap.has(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnimatedSprite=class{constructor(e){this._spriteSheet=e,this._tick=0,this._frameRate=2,this._currentFrame=0,this._sprites=new Array}setFrameRate(e){this._frameRate=e}addSprite(e){this._sprites.push(e)}render(e,t,n){this._spriteSheet.render(e,this._sprites[this._currentFrame],t,n)}animate(){this._tick++,this._tick===this._frameRate&&(this._currentFrame++,this._tick=0),this._currentFrame==this._sprites.length&&(this._currentFrame=0)}getCurrentSprite(){return this._sprites[this._currentFrame]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DirectionComponent=class{constructor(){this._direction="down"}name(){return"direction"}setDirection(e){this._direction=e}getDirection(){return this._direction}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnimationComponent=class{constructor(){this._animatedSprite=new Map}name(){return"animation"}setAnimatedSprite(e,t){this._animatedSprite.set(e,t)}getAnimatedSprite(e){return this._animatedSprite.get(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WallComponent=class{name(){return"wall"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(13),s=n(9),a=n(80);var o;!function(e){e[e.GRASS=0]="GRASS",e[e.WALL=1]="WALL",e[e.BRICK=2]="BRICK",e[e.WALL_STONE=3]="WALL_STONE",e[e.GRASSY=4]="GRASSY",e[e.WATER_EDGE=5]="WATER_EDGE",e[e.WATER=6]="WATER",e[e.WATER_WALL=7]="WATER_WALL",e[e.CRATE=8]="CRATE",e[e.BUSH=9]="BUSH",e[e.FLOWERS=10]="FLOWERS",e[e.MUSHROOMS=11]="MUSHROOMS"}(o=t.TileType||(t.TileType={}));class l{constructor(){this._width=19,this._height=14}static getInstance(){return void 0===this._instance&&(this._instance=new l,this._instance.init()),this._instance}init(){this._particles=new Array,this._level=new Map,this._level.set("tile",new Array),this._level.set("item",new Array),this._level.set("decal",new Array);for(let e=0;e<this._height;e++)for(let t=0;t<this._width;t++){let n=a.map[t+e*this._width],s=null,l=null,c=new r.PositionComponent;c.setX(t),c.setY(e),n===o.WALL?s=i.EntityManager.getInstance().getEntity("wall"):n===o.GRASS?s=i.EntityManager.getInstance().getEntity("grass"):n===o.BRICK?(s=i.EntityManager.getInstance().getEntity("destroyedBrick"),l=i.EntityManager.getInstance().getEntity("brick")):n===o.GRASSY?s=i.EntityManager.getInstance().getEntity("grassy"):n===o.WATER_EDGE?(s=i.EntityManager.getInstance().getEntity("waterEdge"),this.generateMist(c.getX(),c.getY())):n===o.WATER?(s=i.EntityManager.getInstance().getEntity("water"),this.generateMist(c.getX(),c.getY())):n===o.WALL_STONE?s=i.EntityManager.getInstance().getEntity("wallStone"):n===o.WATER_WALL?(s=i.EntityManager.getInstance().getEntity("destroyedWaterWall"),l=i.EntityManager.getInstance().getEntity("waterWall"),this.generateMist(c.getX(),c.getY())):n===o.CRATE?(s=i.EntityManager.getInstance().getEntity("destroyedGrass"),l=i.EntityManager.getInstance().getEntity("crate")):n===o.BUSH?(s=i.EntityManager.getInstance().getEntity("destroyedBush"),l=i.EntityManager.getInstance().getEntity("bush")):n===o.FLOWERS?s=i.EntityManager.getInstance().getEntity("flowers"):n===o.MUSHROOMS&&(s=i.EntityManager.getInstance().getEntity("mushrooms")),null!=s&&(s.addComponent(c),this._level.get("tile").push(s)),null!=l?(l.addComponent(c),this._level.get("item").push(l)):this._level.get("item").push(null),this._level.get("decal").push(null)}}getGameEntity(e,t,n){return this._level.get(e)[t+n*this._width]}getWidth(){return this._width}getHeight(){return this._height}getMap(){return this._level}setGameEntity(e,t,n,i){if(null!=i){let e=new r.PositionComponent;e.setX(t),e.setY(n),i.addComponent(e)}this._level.get(e)[t+n*this._width]=i}isWall(e,t){let n=this.getGameEntity("tile",e,t),i=this.getGameEntity("item",e,t);return!(null==i||!i.hasComponent("wall"))||!!n.hasComponent("wall")}hasComponent(e,t,n){let i=this.getGameEntity("item",t,n);if(null!=i&&i.hasComponent(e))return!0;let r=this.getGameEntity("tile",t,n);return!(null==r||!r.hasComponent(e))}addParticle(e){this._particles.push(e)}getParticles(){return this._particles}removeParticle(e){}translateCoordinatesToIdx(e,t){return e+t*this._width}canDestroy(e,t){let n=this.getGameEntity("tile",e,t),i=this.getGameEntity("item",e,t);return!(null==i||!i.hasComponent("wall")||i.hasComponent("destructible"))||!!n.hasComponent("wall")}generateMist(e,t){for(let n=0;n<4;n++){let n=s.ParticleFactory.getParticle("mistParticle",e,t);this.addParticle(n)}}isItemPresent(e,t,n){let i=this.getGameEntity("item",t,n);return null!=i&&i.getName()===e}}t.GameMap=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DestructibleComponent=class{constructor(){}name(){return"destructible"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){}static getInstance(){return i._instance||(i._instance=new i,i._instance._channels=new Map),i._instance}register(e,t){this._channels.has(e)||(console.log("Creating new channel ->"+e),this._channels.set(e,new Array)),this._channels.get(e).push(t)}publish(e){if(this._channels.has(e.channel)){let t=this._channels.get(e.channel);for(let n of t)n.handleEvent(e)}else console.log("No listeners registered for channel -> "+e.channel)}}t.EventBus=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(13),s=n(58),a=n(16),o=n(17),l=n(11);t.ParticleFactory=class{static getParticle(e,t,n){return this.refreshParticle(null,e,t,n,!1)}static refreshParticle(e,t,n,c,d=!0){if("smokeParticle"===t){null==e&&((e=i.EntityManager.getInstance().getEntity("smokeParticle")).addComponent(new s.ParticleComponent),e.addComponent(new r.PositionComponent));let t=e.getComponent("position");t.setX(64*n),t.setY(64*c),e.addComponent(t);let d=e.getComponent("particle");d.setVelX(-1*a.getRandomInt(4)),d.setVelY(-1*a.getRandomInt(4)),d.setX(64*n+a.getRandomInt(10)),d.setY(64*c+a.getRandomInt(10)),d.setHeight(a.getRandomInt(15)+35),d.setWidth(a.getRandomInt(15)+35),d.setDecay(a.getRandomInt(25)),d.setAlive(!0),d.setRenderOffset(l.Renderer.getInstance().getRenderOffset());let p=new o.Color,h=a.getRandomInt(255);p.setRed(h),p.setGreen(h),p.setBlue(h),p.setAlpha(.2),d.setColor(p),e.addComponent(d)}if("grassParticle"===t){null==e&&((e=i.EntityManager.getInstance().getEntity("grassParticle")).addComponent(new s.ParticleComponent),e.addComponent(new r.PositionComponent));let t=e.getComponent("position");t.setX(64*n),t.setY(64*c),e.addComponent(t);let d=e.getComponent("particle");d.setVelX(-1*a.getRandomInt(4)/10),d.setVelY(-1*a.getRandomInt(4)/10),d.setX(64*n+a.getRandomInt(8)),d.setY(64*c+60),d.setHeight(a.getRandomInt(8)),d.setWidth(a.getRandomInt(8)),d.setDecay(a.getRandomInt(10)),d.setAlive(!0),d.setRenderOffset(l.Renderer.getInstance().getRenderOffset());let p=new o.Color,h=a.getRandomInt(255);p.setRed(h),p.setGreen(h),p.setBlue(h),p.setAlpha(.1),d.setColor(p),e.addComponent(d)}else if("mistParticle"===t){null==e&&((e=i.EntityManager.getInstance().getEntity("mistParticle")).addComponent(new s.ParticleComponent),e.addComponent(new r.PositionComponent));let t=e.getComponent("position");t.setX(64*n),t.setY(64*c),e.addComponent(t);let p=e.getComponent("particle");a.getRandomInt(10)>5?p.setVelX(a.getRandomInt(4)/1e3):p.setVelX(a.getRandomInt(4)/1e3*-1),a.getRandomInt(10)>5?p.setVelY(a.getRandomInt(4)/1e3):p.setVelY(a.getRandomInt(4)/1e3*-1),d?(p.setX(p.getOriginalX()),p.setY(p.getOriginalY())):(p.setX(64*n+a.getRandomInt(10)),p.setY(64*c+a.getRandomInt(10))),p.setHeight(a.getRandomInt(25)+35),p.setWidth(a.getRandomInt(25)+35),p.setDecay(a.getRandomInt(128)),p.setRespawn(!0),p.setAlive(!0),p.setRenderOffset(l.Renderer.getInstance().getRenderOffset());let h=new o.Color,u=a.getRandomInt(255);h.setRed(u),h.setGreen(u),h.setBlue(u),h.setAlpha(.1),p.setColor(h),e.addComponent(p)}else if("rainParticle"===t){null==e&&((e=i.EntityManager.getInstance().getEntity("rainParticle")).addComponent(new s.ParticleComponent),e.addComponent(new r.PositionComponent));let t=e.getComponent("position");t.setX(a.getRandomInt(1e3)),t.setY(-1*a.getRandomInt(1e3)),e.addComponent(t);let n=e.getComponent("particle");n.setVelX(a.getRandomInt(4)/10),n.setVelY(a.getRandomInt(500)),n.setX(a.getRandomInt(2048)),n.setY(-1*a.getRandomInt(1024)),n.setHeight(a.getRandomInt(800)),n.setWidth(a.getRandomInt(3)),n.setDecay(a.getRandomInt(40)),n.setRespawn(!0),n.setResize(!1),n.setAlive(!0);let l=new o.Color,c=a.getRandomInt(255);l.setRed(c),l.setGreen(c),l.setBlue(c),l.setAlpha(.15),n.setColor(l),e.addComponent(n)}else if("winningParticle"===t){null==e&&((e=i.EntityManager.getInstance().getEntity("winningParticle")).addComponent(new s.ParticleComponent),e.addComponent(new r.PositionComponent));let t=e.getComponent("position");t.setX(a.getRandomInt(1e3)),t.setY(a.getRandomInt(1e3)),e.addComponent(t);let n=e.getComponent("particle");n.setVelX(a.getRandomInt(4)/10),n.setVelY(-1*a.getRandomInt(500)),n.setX(a.getRandomInt(2048)),n.setY(a.getRandomInt(1024)),n.setHeight(a.getRandomInt(800)),n.setWidth(a.getRandomInt(128)),n.setDecay(a.getRandomInt(40)),n.setRespawn(!0),n.setResize(!1),n.setAlive(!0);let l=new o.Color,c=a.getRandomInt(50);l.setRed(50+c),l.setGreen(115),l.setBlue(168+c),l.setAlpha(.15),n.setColor(l),e.addComponent(n)}else if("losingParticle"===t){null==e&&((e=i.EntityManager.getInstance().getEntity("losingParticle")).addComponent(new s.ParticleComponent),e.addComponent(new r.PositionComponent));let t=e.getComponent("position");t.setX(a.getRandomInt(1e3)),t.setY(a.getRandomInt(1e3)),e.addComponent(t);let n=e.getComponent("particle");n.setVelX(a.getRandomInt(4)/10),n.setVelY(-1*a.getRandomInt(50)),n.setX(a.getRandomInt(2048)),n.setY(a.getRandomInt(1024)),n.setHeight(a.getRandomInt(800)),n.setWidth(a.getRandomInt(128)),n.setDecay(a.getRandomInt(40)),n.setRespawn(!0),n.setResize(!1),n.setAlive(!0);let l=new o.Color,c=a.getRandomInt(5);a.getRandomInt(10)>5?(l.setRed(105+c),l.setGreen(45-c),l.setBlue(44+c),l.setAlpha(.45)):(l.setRed(c),l.setGreen(c),l.setBlue(c),l.setAlpha(.45)),n.setColor(l),e.addComponent(n)}return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(37),r=n(43),s=n(24),a=n(44),o=n(45),l=n(46),c=n(47),d=n(48),p=n(49),h=n(50),u=n(51),g=n(52),m=n(53),f=n(54),y=n(57),_=n(59),S=n(60),w=n(61),v=n(62),b=n(63),C=n(30),x=n(64),M=n(65),I=n(66),P=n(67),E=n(68),A=n(69),O=n(70),R=n(71),G=n(72),j=n(73),D=n(74),Y=n(75),X=n(76);var k=n(77);class B{constructor(){}static getInstance(){return void 0===this._instance&&(this._instance=new B,this._instance._entities=new Map,this._instance._players=new Map,this._instance.init()),this._instance}init(){this.register(new a.Brick),this.register(new i.Grass),this.register(new r.Wall),this.register(new o.Grassy),this.register(new d.WallStone),this.register(new l.WaterEdge),this.register(new p.WaterWall),this.register(new c.Water),this.register(new h.Crate),this.register(new u.Bush),this.register(new g.Mushrooms),this.register(new m.Flowers),this.register(new f.Bomb),this.register(new y.ExplosionLeft),this.register(new S.ExplosionRight),this.register(new w.ExplosionTop),this.register(new v.ExplosionBottom),this.register(new _.ExplosionMiddle),this.register(new b.DestoryedWaterWall),this.register(new C.DestroyedGrass),this.register(new x.DestroyedBrick),this.register(new M.DestroyedBush),this.register(new I.BombUp),this.register(new P.ExplosionUp),this.register(new E.SheildUp),this.register(new A.Skull),this.register(new O.SpeedUp),this.register(new R.SmokeParticle),this.register(new G.GrassParticle),this.register(new j.MistParticles),this.register(new D.RainParticle),this.register(new Y.WinningParticle),this.register(new X.LosingParticles)}registerPlayer(e){this._players.set(e.getName(),e)}getPlayer(e){return this._players.get(e)}register(e){this._entities.set(e.getName(),e)}getEntity(e){let t=k(this._entities.get(e));return t.setId(s.IdGenerator.nextId()),t}}t.EntityManager=B},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),r=n(25),s=n(26);class a{constructor(){this._height=window.innerHeight,this._width=window.innerWidth,this._canvas=document.getElementById("canvas"),this._canvas.width=this._width,this._canvas.height=this._height,this._ctx=this._canvas.getContext("2d"),this._ctx.imageSmoothingEnabled=!1,this._renderingEffects={offsetX:0,offsetY:0,width:0,height:0,color:new r.Color},this._spriteSize=64,i.EventBus.getInstance().register("rendering",this)}static getInstance(){return void 0===this._instance&&(this._instance=new a),this._instance}clearScreen(){this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height)}render(e,t,n,i){try{null!=this._renderingEffects.color&&this._renderingEffects.color.getAlpha(),this._ctx.drawImage(t,e.x,e.y,24,24,n+this._renderingEffects.offsetX+this.getRenderOffset(),i+this._renderingEffects.offsetY+this.getRenderOffset(),this._spriteSize+this._renderingEffects.width,this._spriteSize+this._renderingEffects.height)}catch(e){Error("Unable to render")}}getRenderOffset(){return 100}finalRender(){this._renderingEffects.height>0&&(this._renderingEffects.height-=4),this._renderingEffects.height<0&&(this._renderingEffects.height=0),this._renderingEffects.width>0&&(this._renderingEffects.width-=4),this._renderingEffects.width<0&&(this._renderingEffects.width=0),this._renderingEffects.offsetX>0&&(this._renderingEffects.offsetX-=4),this._renderingEffects.offsetX<0&&(this._renderingEffects.offsetX=0),this._renderingEffects.offsetY>0&&(this._renderingEffects.offsetY-=4),this._renderingEffects.offsetY<0&&(this._renderingEffects.offsetY=0),this._renderingEffects.color.getAlpha()>0?this._renderingEffects.color.setAlpha(this._renderingEffects.color.getAlpha()-1):this._renderingEffects.height<0&&(this._renderingEffects.height=0)}resize(){void 0!==this._canvas&&(this._canvas.width=window.innerWidth,this._canvas.height=window.innerHeight,this._ctx.imageSmoothingEnabled=!1)}handleEvent(e){this._renderingEffects=e.payload}renderImage(e,t,n,i,r){this._ctx.drawImage(e,t,n,i,r)}print(e,t,n,i,r,a){this._ctx.font=r+"px "+i,this._ctx.fillStyle=s.RGBtoHex(a.getRed(),a.getGreen(),a.getBlue()),this._ctx.fillText(e,t,n)}}t.Renderer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GameEvent=class{constructor(e,t){this._channel=e,this._payload=t}get channel(){return this._channel}get payload(){return this._payload}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PositionComponent=class{constructor(){this._x=0,this._y=0}name(){return"position"}setX(e){this._x=e}setY(e){this._y=e}getX(){return this._x}getY(){return this._y}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(29),s=n(6),a=n(30),o=n(9),l=n(0),c=n(2),d=n(4),p=n(3),h=n(27);class u extends i.GameEntity{constructor(e){super(e)}create(e){let t=l.SpriteSheetManager.getInstance().getSpriteSheet("level"),n=new c.AnimatedSprite(l.SpriteSheetManager.getInstance().getSpriteSheet("level"));n.addSprite(t.getSprite(e,e));let i=new d.AnimationComponent;i.setAnimatedSprite("down",n),this.addComponent(i);let r=new p.DirectionComponent;r.setDirection("down"),this.addComponent(r);let s=new h.TimerComponent;s.setTimer(5),s.setCallback(e=>{this.explosion(e)}),this.addComponent(s)}explosion(e){let t=e.getComponent("position");s.GameMap.getInstance().setGameEntity("item",t.getX(),t.getY(),null);let n=s.GameMap.getInstance().getGameEntity("tile",t.getX(),t.getY());if("grassy"===n.getName()||"grass"===n.getName()||"flowers"===n.getName()||"mushrooms"===n.getName()){let e=new a.DestroyedGrass;e.addComponent(t),s.GameMap.getInstance().setGameEntity("tile",t.getX(),t.getY(),e)}for(let e=0;e<250;e++){let e=o.ParticleFactory.getParticle("smokeParticle",t.getX(),t.getY());s.GameMap.getInstance().addParticle(e)}n.addComponent(t),n.addComponent(new r.DamageComponent)}}t.Explosion=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(26),s=n(9);t.ParticleSystem=class{constructor(){this._canvas=document.getElementById("canvas"),this._ctx=this._canvas.getContext("2d")}process(e){if(e.hasComponent("particle")){let t=e.getComponent("particle");t.isAlive()?(t.setX(t.getX()+t.getVelX()),t.setY(t.getY()+t.getVelY()),t.shouldResize()&&(t.setWidth(t.getWidth()-1),t.setHeight(t.getHeight()-1)),t.getColor().setAlpha(t.getColor().getAlpha()-1e-6),t.setDecay(t.getDecay()-1),this._ctx.globalAlpha=t.getColor().getAlpha(),this._ctx.beginPath(),this._ctx.rect(t.getX()+t.getRenderOffset(),t.getY()+t.getRenderOffset(),t.getWidth(),t.getHeight()),this._ctx.fillStyle=r.RGBtoHex(t.getColor().getRed(),t.getColor().getGreen(),t.getColor().getBlue()),this._ctx.fill(),this._ctx.closePath()):t.isAlive()||t.shouldRespawn()?!t.isAlive()&&t.shouldRespawn()&&s.ParticleFactory.refreshParticle(e,e.getName(),t.getX(),t.getY()):i.GameMap.getInstance().removeParticle(e.getId()),t.getDecay()<=0&&t.setAlive(!1),this._ctx.globalAlpha=1}}}},function(e,t,n){"use strict";function i(e){return Math.floor(Math.random()*(e-1+1)+1)}function r(e,t){return Math.floor(Math.random()*(t-1+e)+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getDecimal=function(e){return e-Math.floor(e)},t.getRandomInt=i,t.getRandomBetween=r,t.getRandomArrayElement=function(e){return r(0,e.length)},t.positiveNegative=function(){return i(10)>5?-1:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Color=class{constructor(){this._alpha=0}setRed(e){this._red=e}getRed(){return this._red}setGreen(e){this._green=e}getGreen(){return this._green}setBlue(e){this._blue=e}getBlue(){return this._blue}setAlpha(e){this._alpha=e}getAlpha(){return this._alpha}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(2),a=n(4),o=n(13),l=n(97),c=n(28),d=n(98),p=n(3),h=n(10),u=n(99);class g extends i.GameEntity{constructor(e){super(e);let t=r.SpriteSheetManager.getInstance().getSpriteSheet("players"),n=new o.PositionComponent;n.setX(1),n.setY(1),this.addComponent(n);let i=new d.RenderPositionComponent;i.setX(64),i.setY(64),this.addComponent(i);let g=new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("players"));g.addSprite(t.getSprite(e,"front1")),g.addSprite(t.getSprite(e,"front2")),g.addSprite(t.getSprite(e,"front3"));let m=new a.AnimationComponent;m.setAnimatedSprite("down",g);let f=new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("players"));f.addSprite(t.getSprite(e,"back1")),f.addSprite(t.getSprite(e,"back2")),f.addSprite(t.getSprite(e,"back3")),m.setAnimatedSprite("up",f);let y=new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("players"));y.addSprite(t.getSprite(e,"left1")),y.addSprite(t.getSprite(e,"left2")),y.addSprite(t.getSprite(e,"left3")),m.setAnimatedSprite("left",y);let _=new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("players"));_.addSprite(t.getSprite(e,"right1")),_.addSprite(t.getSprite(e,"right2")),_.addSprite(t.getSprite(e,"right3")),m.setAnimatedSprite("right",_);let S=new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("players"));S.addSprite(t.getSprite(e,"death1")),S.addSprite(t.getSprite(e,"death2")),S.addSprite(t.getSprite(e,"death3")),S.addSprite(t.getSprite(e,"death4")),S.addSprite(t.getSprite(e,"death5")),S.addSprite(t.getSprite(e,"death6")),S.addSprite(t.getSprite(e,"death7")),S.addSprite(t.getSprite(e,"death8")),m.setAnimatedSprite("dead",S),this.addComponent(m);let w=new l.SpeedComponent;w.setSpeed(12),this.addComponent(w);let v=new c.VelocityComponent;v.setVelX(0),v.setVelY(0),this.addComponent(v);let b=new p.DirectionComponent;b.setDirection("down"),this.addComponent(b),this.addComponent(new u.InventoryComponent),h.EntityManager.getInstance().registerPlayer(this)}}t.Player=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AiComponent=class{constructor(){this._lastMove=(new Date).getTime()}name(){return"ai"}updateMove(){this._lastMove=(new Date).getTime()}getLastMove(){return this._lastMove}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EnemyComponent=class{constructor(){this._enemyName=null}name(){return"enemy"}setEnemyName(e){this._enemyName=e}getEnemyName(){return this._enemyName}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SPACE=32]="SPACE",e[e.UP=38]="UP",e[e.DOWN=40]="DOWN",e[e.LEFT=37]="LEFT",e[e.RIGHT=39]="RIGHT",e[e.ENTER=13]="ENTER"}(t.KeyboardInput||(t.KeyboardInput={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OverLayBase=class{setActive(e){this._active=e}getActive(){return this._active}}},function(e,t,n){e.exports=n.p+"bf9ad15865dfb87ad0db05003d2e1c97.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{static nextId(){return this._id++,this._id}}t.IdGenerator=i,i._id=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Color=class{constructor(){this._alpha=0}setRed(e){this._red=e}getRed(){return this._red}setGreen(e){this._green=e}getGreen(){return this._green}setBlue(e){this._blue=e}getBlue(){return this._blue}setAlpha(e){this._alpha=e}getAlpha(){return this._alpha}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBtoHex=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TimerComponent=class{constructor(){this._timer=5}getTimer(){return this._timer}name(){return"timer"}setTimer(e){this._timer=e}setCallback(e){this._callBack=e}getCallBack(){return this._callBack}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VelocityComponent=class{constructor(){this._velX=0,this._velY=0}name(){return"velocity"}setVelX(e){this._velX=e}getVelX(){return this._velX}setVelY(e){this._velY=e}getVelY(){return this._velY}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DamageComponent=class{constructor(){}name(){return"damage"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("destroyedGrass");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("destroyedGrass","destroyedGrass"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.DestroyedGrass=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(83),r=n(84),s=n(85),a=n(86),o=n(88),l=n(15),c=n(90);class d{constructor(){}static getInstance(){return void 0===this._instance&&(this._instance=new d,this._instance._gameSystems=new Array,this._instance.init()),this._instance}init(){this.register(new i.CollisionSystem),this.register(new s.TimerSystem),this.register(new a.AttackSystem),this.register(new o.DamageSystem),this.register(new c.AiSystem),this.register(new r.RenderSystem),this.register(new l.ParticleSystem)}register(e){this._gameSystems.push(e)}getSystems(){return this._gameSystems}}t.SystemManager=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnimateComponent=class{constructor(){}name(){return"animate"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AttackComponent=class{constructor(){}name(){return"attack"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),r=n(93),s=n(94),a=n(95);class o{constructor(){i.EventBus.getInstance().register("audio",this)}static getInstance(){return void 0===this._instance&&(this._instance=new o,this._instance._soundMap=new Map,this._instance.init()),this._instance}init(){let e=new Audio;this.register("music",s),this.register("explosion1",a),this.register("explosion2",a),this.register("explosion3",a),e.canPlayType("audio/ogg")||Error("Your browser doesn't support audio/ogg")}register(e,t){this._soundMap.set(e,new r.AudioFile(t,!1))}play(e){this._soundMap.get(e).play()}handleEvent(e){this.play(e.payload)}}t.AudioManager=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(36);var r;n(110),window.onload=()=>{(r=new i.Bomberman).init()},window.onresize=function(){r.resize()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(81),s=n(82),a=n(8),o=n(11),l=n(103),c=n(104),d=n(106),p=n(108),h=60;class u extends l.Application{constructor(){super(...arguments),this._deathCount=0}init(){i.GameMap.getInstance(),this._renderer=o.Renderer.getInstance(),this._gameScreens=new Map,this._gameOverlayScreen=new Map,this._gameScreens.set(r.GameMode.PLAYING,new s.Game),this._gameScreens.get(r.GameMode.PLAYING).init(),this._gameOverlayScreen.set("startGame",new c.StartGame),this._gameOverlayScreen.set("victory",new d.Victory),this._gameOverlayScreen.set("gameOver",new p.GameOver),this._gameMode=r.GameMode.PLAYING,a.EventBus.getInstance().register("keyboardEvent",this),a.EventBus.getInstance().register("gameOver",this),a.EventBus.getInstance().register("death",this),a.EventBus.getInstance().register("startGame",this),this._gameOverlayScreen.get("startGame").enable(),this.gameLoop()}gameLoop(){this._renderer.clearScreen(),this._gameScreens.get(this._gameMode).gameLoop();for(let e of this._gameOverlayScreen.keys())this._gameOverlayScreen.get(e).isActive()&&this._gameOverlayScreen.get(e).gameLoop();this._renderer.finalRender(),setTimeout(()=>{requestAnimationFrame(this.gameLoop.bind(this))},1e3/h)}handleEvent(e){if("keyboardEvent"===e.channel){for(let t of this._gameOverlayScreen.keys())if(this._gameOverlayScreen.get(t).isActive())return void this._gameOverlayScreen.get(t).keyboard(e);this._gameScreens.get(this._gameMode).keyboard(e)}else if("startGame"===e.channel){this._deathCount=0,this._gameScreens.get(r.GameMode.PLAYING).reset(!0),this._gameOverlayScreen.get("startGame").disable(),this._gameOverlayScreen.get("gameOver").disable(),this._gameOverlayScreen.get("victory").disable()}else if("gameOver"===e.channel)this._gameOverlayScreen.get("gameOver").enable(),this._gameOverlayScreen.get("victory").disable();else if("death"===e.channel&&(this._deathCount++,this._deathCount>=3)){if(this._gameOverlayScreen.get("startGame").isActive()){return this._gameOverlayScreen.get("gameOver").disable(),this._deathCount=0,void this._gameScreens.get(r.GameMode.PLAYING).reset(!1)}this._gameOverlayScreen.get("victory").enable()}}}t.Bomberman=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("grass");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("grass","grass"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Grass=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(11);t.SpriteSheet=class{constructor(e){this._spriteSheetDefinition=e,this._spriteCache=new Map}load(e){this._image=new Image,this._image.src=e}getSprite(e,t){if(this._spriteCache.has(e+"#"+t))return this._spriteCache.get(e+"#"+t);for(let n=0;n<this._spriteSheetDefinition.sprites.length;n++)if(this._spriteSheetDefinition.sprites[n].name===e){for(let i=0;i<this._spriteSheetDefinition.sprites[n].definition.length;i++)if(this._spriteSheetDefinition.sprites[n].definition[i].name===t)return this._spriteCache.set(e+"#"+t,this._spriteSheetDefinition.sprites[n].definition[i]),this._spriteSheetDefinition.sprites[n].definition[i];throw Error("Unable to find frameName ->"+t)}throw Error("Unable to find sprite ->"+e)}render(e,t,n,r){i.Renderer.getInstance().render(t,this._image,n,r)}}},function(e,t,n){e.exports=n.p+"ec042640615f2c932201549e3e64442d.png"},function(e){e.exports=JSON.parse('{"filename":"player.png","sprites":[{"name":"whitePlayer","definition":[{"name":"front1","x":0,"y":0},{"name":"front2","x":0,"y":24},{"name":"front3","x":0,"y":48},{"name":"right1","x":0,"y":72},{"name":"right2","x":0,"y":96},{"name":"right3","x":0,"y":120},{"name":"left1","x":0,"y":144},{"name":"left2","x":0,"y":168},{"name":"left3","x":0,"y":192},{"name":"back1","x":0,"y":216},{"name":"back2","x":0,"y":240},{"name":"back3","x":0,"y":264},{"name":"death1","x":0,"y":288},{"name":"death2","x":0,"y":312},{"name":"death3","x":0,"y":336},{"name":"death4","x":0,"y":360},{"name":"death5","x":0,"y":384},{"name":"death6","x":0,"y":408},{"name":"death7","x":0,"y":432},{"name":"death8","x":0,"y":456}]},{"name":"blackPlayer","definition":[{"name":"front1","x":24,"y":0},{"name":"front2","x":24,"y":24},{"name":"front3","x":24,"y":48},{"name":"right1","x":24,"y":72},{"name":"right2","x":24,"y":96},{"name":"right3","x":24,"y":120},{"name":"left1","x":24,"y":144},{"name":"left2","x":24,"y":168},{"name":"left3","x":24,"y":192},{"name":"back1","x":24,"y":216},{"name":"back2","x":24,"y":240},{"name":"back3","x":24,"y":264},{"name":"death1","x":24,"y":288},{"name":"death2","x":24,"y":312},{"name":"death3","x":24,"y":336},{"name":"death4","x":24,"y":360},{"name":"death5","x":24,"y":384},{"name":"death6","x":24,"y":408},{"name":"death7","x":24,"y":432},{"name":"death8","x":24,"y":456}]},{"name":"redPlayer","definition":[{"name":"front1","x":48,"y":0},{"name":"front2","x":48,"y":24},{"name":"front3","x":48,"y":48},{"name":"right1","x":48,"y":72},{"name":"right2","x":48,"y":96},{"name":"right3","x":48,"y":120},{"name":"left1","x":48,"y":144},{"name":"left2","x":48,"y":168},{"name":"left3","x":48,"y":192},{"name":"back1","x":48,"y":216},{"name":"back2","x":48,"y":240},{"name":"back3","x":48,"y":264},{"name":"death1","x":48,"y":288},{"name":"death2","x":48,"y":312},{"name":"death3","x":48,"y":336},{"name":"death4","x":48,"y":360},{"name":"death5","x":48,"y":384},{"name":"death6","x":48,"y":408},{"name":"death7","x":48,"y":432},{"name":"death8","x":48,"y":456}]},{"name":"orangePlayer","definition":[{"name":"front1","x":72,"y":0},{"name":"front2","x":72,"y":24},{"name":"front3","x":72,"y":48},{"name":"right1","x":72,"y":72},{"name":"right2","x":72,"y":96},{"name":"right3","x":72,"y":120},{"name":"left1","x":72,"y":144},{"name":"left2","x":72,"y":168},{"name":"left3","x":72,"y":192},{"name":"back1","x":72,"y":216},{"name":"back2","x":72,"y":240},{"name":"back3","x":72,"y":264},{"name":"death1","x":72,"y":288},{"name":"death2","x":72,"y":312},{"name":"death3","x":72,"y":336},{"name":"death4","x":72,"y":360},{"name":"death5","x":72,"y":384},{"name":"death6","x":72,"y":408},{"name":"death7","x":72,"y":432},{"name":"death8","x":72,"y":456}]},{"name":"greenPlayer","definition":[{"name":"front1","x":96,"y":0},{"name":"front2","x":96,"y":24},{"name":"front3","x":96,"y":48},{"name":"right1","x":96,"y":72},{"name":"right2","x":96,"y":96},{"name":"right3","x":96,"y":120},{"name":"left1","x":96,"y":144},{"name":"left2","x":96,"y":168},{"name":"left3","x":96,"y":192},{"name":"back1","x":96,"y":216},{"name":"back2","x":96,"y":240},{"name":"back3","x":96,"y":264},{"name":"death1","x":96,"y":288},{"name":"death2","x":96,"y":312},{"name":"death3","x":96,"y":336},{"name":"death4","x":96,"y":360},{"name":"death5","x":96,"y":384},{"name":"death6","x":96,"y":408},{"name":"death7","x":96,"y":432},{"name":"death8","x":96,"y":456}]},{"name":"cyanPlayer","definition":[{"name":"front1","x":120,"y":0},{"name":"front2","x":120,"y":24},{"name":"front3","x":120,"y":48},{"name":"right1","x":120,"y":72},{"name":"right2","x":120,"y":96},{"name":"right3","x":120,"y":120},{"name":"left1","x":120,"y":144},{"name":"left2","x":120,"y":168},{"name":"left3","x":120,"y":192},{"name":"back1","x":120,"y":216},{"name":"back2","x":120,"y":240},{"name":"back3","x":120,"y":264},{"name":"death1","x":120,"y":288},{"name":"death2","x":120,"y":312},{"name":"death3","x":120,"y":336},{"name":"death4","x":120,"y":360},{"name":"death5","x":120,"y":384},{"name":"death6","x":120,"y":408},{"name":"death7","x":120,"y":432},{"name":"death8","x":120,"y":456}]},{"name":"bluePlayer","definition":[{"name":"front1","x":144,"y":0},{"name":"front2","x":144,"y":24},{"name":"front3","x":144,"y":48},{"name":"right1","x":144,"y":72},{"name":"right2","x":144,"y":96},{"name":"right3","x":144,"y":120},{"name":"left1","x":144,"y":144},{"name":"left2","x":144,"y":168},{"name":"left3","x":144,"y":192},{"name":"back1","x":144,"y":216},{"name":"back2","x":144,"y":240},{"name":"back3","x":144,"y":264},{"name":"death1","x":144,"y":288},{"name":"death2","x":144,"y":312},{"name":"death3","x":144,"y":336},{"name":"death4","x":144,"y":360},{"name":"death5","x":144,"y":384},{"name":"death6","x":144,"y":408},{"name":"death7","x":144,"y":432},{"name":"death8","x":144,"y":456}]},{"name":"purplePlayer","definition":[{"name":"front1","x":168,"y":0},{"name":"front2","x":168,"y":24},{"name":"front3","x":168,"y":48},{"name":"right1","x":168,"y":72},{"name":"right2","x":168,"y":96},{"name":"right3","x":168,"y":120},{"name":"left1","x":168,"y":144},{"name":"left2","x":168,"y":168},{"name":"left3","x":168,"y":192},{"name":"back1","x":168,"y":216},{"name":"back2","x":168,"y":240},{"name":"back3","x":168,"y":264},{"name":"death1","x":168,"y":288},{"name":"death2","x":168,"y":312},{"name":"death3","x":168,"y":336},{"name":"death4","x":168,"y":360},{"name":"death5","x":168,"y":384},{"name":"death6","x":168,"y":408},{"name":"death7","x":168,"y":432},{"name":"death8","x":168,"y":456}]}]}')},function(e,t,n){e.exports=n.p+"eedd6bf240c29ad625c91bea258dee82.png"},function(e){e.exports=JSON.parse('{"filename":"level.png","sprites":[{"name":"wall","definition":[{"name":"wall","x":0,"y":0}]},{"name":"grass","definition":[{"name":"grass","x":24,"y":0}]},{"name":"brick","definition":[{"name":"brick","x":48,"y":0}]},{"name":"wallStone","definition":[{"name":"wallStone","x":72,"y":0}]},{"name":"grassy","definition":[{"name":"grassy","x":96,"y":0}]},{"name":"water1","definition":[{"name":"water1","x":0,"y":24}]},{"name":"water2","definition":[{"name":"water2","x":24,"y":24}]},{"name":"destroyedWaterWall","definition":[{"name":"destroyedWaterWall","x":48,"y":24}]},{"name":"water4","definition":[{"name":"water4","x":72,"y":24}]},{"name":"water5","definition":[{"name":"water5","x":96,"y":24}]},{"name":"bomb1","definition":[{"name":"bomb1","x":0,"y":48}]},{"name":"bomb2","definition":[{"name":"bomb2","x":24,"y":48}]},{"name":"bomb3","definition":[{"name":"bomb3","x":48,"y":48}]},{"name":"bomb4","definition":[{"name":"bomb4","x":72,"y":48}]},{"name":"bomb5","definition":[{"name":"bomb5","x":96,"y":48}]},{"name":"explosionLeft","definition":[{"name":"explosionLeft","x":0,"y":72}]},{"name":"explosionMiddle","definition":[{"name":"explosionMiddle","x":24,"y":72}]},{"name":"explosionRight","definition":[{"name":"explosionRight","x":48,"y":72}]},{"name":"explosionBottom","definition":[{"name":"explosionBottom","x":72,"y":72}]},{"name":"explosionTop","definition":[{"name":"explosionTop","x":96,"y":72}]},{"name":"bombUp","definition":[{"name":"bombUp","x":0,"y":96}]},{"name":"skull","definition":[{"name":"skull","x":24,"y":96}]},{"name":"explosionUp","definition":[{"name":"explosionUp","x":48,"y":96}]},{"name":"speedUp","definition":[{"name":"speedUp","x":72,"y":96}]},{"name":"shieldUp","definition":[{"name":"shieldUp","x":96,"y":96}]},{"name":"crate","definition":[{"name":"crate","x":0,"y":120}]},{"name":"bush","definition":[{"name":"bush","x":24,"y":120}]},{"name":"flowers","definition":[{"name":"flowers","x":48,"y":120}]},{"name":"mushrooms","definition":[{"name":"mushrooms","x":72,"y":120}]},{"name":"shieldUp","definition":[{"name":"shieldUp","x":96,"y":120}]},{"name":"destroyedGrass","definition":[{"name":"destroyedGrass","x":0,"y":144}]},{"name":"destroyedBrick","definition":[{"name":"destroyedBrick","x":24,"y":144}]},{"name":"destroyedBush","definition":[{"name":"destroyedBush","x":48,"y":144}]},{"name":"particle","definition":[{"name":"particle","x":72,"y":144}]},{"name":"shieldUp","definition":[{"name":"shieldUp","x":96,"y":144}]},{"name":"waterPlant1","definition":[{"name":"waterPlant1","x":0,"y":168}]},{"name":"waterPlant2","definition":[{"name":"waterPlant2","x":24,"y":168}]},{"name":"waterPlant3","definition":[{"name":"waterPlant3","x":48,"y":168}]},{"name":"waterPlant4","definition":[{"name":"waterPlant4","x":72,"y":168}]},{"name":"waterPlant5","definition":[{"name":"waterPlant5","x":96,"y":168}]}]}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(0),a=n(2),o=n(4),l=n(3);class c extends i.GameEntity{constructor(){super("wall"),this.addComponent(new r.WallComponent);let e=s.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new a.AnimatedSprite(s.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("wall","wall"));let n=new o.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Wall=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(4),a=n(0),o=n(2),l=n(3),c=n(7);class d extends i.GameEntity{constructor(){super("brick"),this.addComponent(new r.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new o.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("brick","brick"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Brick=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("grassy");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("grassy","grassy"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Grassy=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("waterEdge");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("water1","water1"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.WaterEdge=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("water");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("water2","water2"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Water=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(0),a=n(2),o=n(4),l=n(3);class c extends i.GameEntity{constructor(){super("wallStone"),this.addComponent(new r.WallComponent);let e=s.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new a.AnimatedSprite(s.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("wallStone","wallStone"));let n=new o.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.WallStone=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3),l=n(5),c=n(7);class d extends i.GameEntity{constructor(){super("waterWall"),this.addComponent(new l.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("waterPlant1","waterPlant1")),t.addSprite(e.getSprite("waterPlant2","waterPlant2")),t.addSprite(e.getSprite("waterPlant3","waterPlant3")),t.addSprite(e.getSprite("waterPlant4","waterPlant4")),t.addSprite(e.getSprite("waterPlant5","waterPlant5")),t.addSprite(e.getSprite("waterPlant4","waterPlant4")),t.addSprite(e.getSprite("waterPlant3","waterPlant3")),t.addSprite(e.getSprite("waterPlant2","waterPlant2")),t.setFrameRate(8);let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.WaterWall=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3),l=n(5),c=n(7);class d extends i.GameEntity{constructor(){super("crate"),this.addComponent(new l.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("crate","crate"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Crate=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3),l=n(5),c=n(7);class d extends i.GameEntity{constructor(){super("bush"),this.addComponent(new l.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("bush","bush"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Bush=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("mushrooms");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("mushrooms","mushrooms"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Mushrooms=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("flowers");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("flowers","flowers"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Flowers=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(0),a=n(2),o=n(4),l=n(3),c=n(27),d=n(28),p=n(7),h=n(55),u=n(6),g=n(13),m=n(10),f=n(29),y=n(8),_=n(12),S=n(25),w=n(16),v=n(56);class b extends i.GameEntity{constructor(){super("bomb"),this.addComponent(new r.WallComponent),this.addComponent(new p.DestructibleComponent),this.addComponent(new h.ExplosiveComponent);let e=s.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new a.AnimatedSprite(s.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("bomb1","bomb1")),t.addSprite(e.getSprite("bomb1","bomb1")),t.addSprite(e.getSprite("bomb2","bomb2")),t.addSprite(e.getSprite("bomb3","bomb3")),t.addSprite(e.getSprite("bomb4","bomb4")),t.addSprite(e.getSprite("bomb5","bomb5")),t.setFrameRate(8);let n=new o.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new c.TimerComponent;i.setTimer(20),i.setCallback(e=>{y.EventBus.getInstance().publish(new _.GameEvent("audio","explosion"+w.getRandomInt(3)));let t=e.getComponent("owner"),n=m.EntityManager.getInstance().getPlayer(t.getOwner()).getComponent("inventory");n.setCurrentItems(n.getCurrentItems()+1);let i=new S.Color;i.setAlpha(25),i.setRed(226),i.setGreen(236),i.setBlue(60),y.EventBus.getInstance().publish(new _.GameEvent("rendering",{offsetX:w.getRandomInt(50)*w.positiveNegative(),offsetY:w.getRandomInt(50)*w.positiveNegative(),width:w.getRandomInt(8)*w.positiveNegative(),height:w.getRandomInt(8)*w.positiveNegative(),color:i}));let r=e.getComponent("position");u.GameMap.getInstance().setGameEntity("item",r.getX(),r.getY(),null);let s=m.EntityManager.getInstance().getEntity("explosionMiddle");s.addComponent(r),u.GameMap.getInstance().setGameEntity("item",r.getX(),r.getY(),s);let a=e.getComponent("explosive");this.setFutureDamage(r,a);for(let e=1;e<=a.getArea();e++){let t=m.EntityManager.getInstance().getEntity("explosionLeft"),n=new g.PositionComponent;if(n.setX(r.getX()-e),n.setY(r.getY()),!this.placeExplosion(n,t))break}for(let e=1;e<=a.getArea();e++){let t=m.EntityManager.getInstance().getEntity("explosionRight"),n=new g.PositionComponent;if(n.setX(r.getX()+e),n.setY(r.getY()),!this.placeExplosion(n,t))break}for(let e=1;e<=a.getArea();e++){let t=m.EntityManager.getInstance().getEntity("explosionTop"),n=new g.PositionComponent;if(n.setX(r.getX()),n.setY(r.getY()-e),!this.placeExplosion(n,t))break}for(let e=1;e<=a.getArea();e++){let t=m.EntityManager.getInstance().getEntity("explosionBottom"),n=new g.PositionComponent;if(n.setX(r.getX()),n.setY(r.getY()+e),!this.placeExplosion(n,t))break}}),this.addComponent(i);let f=new l.DirectionComponent;f.setDirection("down"),this.addComponent(f);let v=new d.VelocityComponent;v.setVelX(0),v.setVelY(0),this.addComponent(v)}placeExplosion(e,t){return!(u.GameMap.getInstance().isWall(e.getX(),e.getY())&&!u.GameMap.getInstance().hasComponent("destructible",e.getX(),e.getY()))&&(t.addComponent(e),t.addComponent(new f.DamageComponent),u.GameMap.getInstance().setGameEntity("item",e.getX(),e.getY(),t),!0)}setFutureDamage(e,t){for(let n=1;n<=t.getArea();n++){u.GameMap.getInstance().getGameEntity("tile",e.getX()-n,e.getY()).addComponent(new v.FutureDamageComponent)}for(let n=1;n<=t.getArea();n++){u.GameMap.getInstance().getGameEntity("tile",e.getX()+n,e.getY()).addComponent(new v.FutureDamageComponent)}for(let n=1;n<=t.getArea();n++){u.GameMap.getInstance().getGameEntity("tile",e.getX(),e.getY()-n).addComponent(new v.FutureDamageComponent)}for(let n=1;n<=t.getArea();n++){u.GameMap.getInstance().getGameEntity("tile",e.getX(),e.getY()+n).addComponent(new v.FutureDamageComponent)}}}t.Bomb=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ExplosiveComponent=class{constructor(){this._area=1}name(){return"explosive"}getArea(){return this._area}setArea(e){this._area=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FutureDamageComponent=class{constructor(){}name(){return"futureDamage"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);class r extends i.Explosion{constructor(){super("explosionLeft"),this.create("explosionLeft")}}t.ExplosionLeft=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ParticleComponent=class{constructor(){this._x=null,this._y=null,this._decay=50,this._respawn=!1,this._alive=!0,this._resize=!0,this._renderOffset=0}name(){return"particle"}setOriginalX(e){this._originalX=e}getOriginalX(){return this._originalX}setOriginalY(e){this._originalY=e}getOriginalY(){return this._originalY}setX(e){null==this._x&&(this._originalX=e),this._x=e}setY(e){null==this._y&&(this._originalY=e),this._y=e}getX(){return this._x}getY(){return this._y}setVelX(e){this._velX=e}getVelX(){return this._velX}setVelY(e){this._velY=e}getVelY(){return this._velY}setWidth(e){this._width=e}getWidth(){return this._width}setHeight(e){this._height=e}getHeight(){return this._height}setColor(e){this._color=e}getColor(){return this._color}setDecay(e){this._decay=e}getDecay(){return this._decay}setRespawn(e){this._respawn=e}shouldRespawn(){return this._respawn}setAlive(e){this._alive=e}isAlive(){return this._alive}setResize(e){this._resize=e}shouldResize(){return this._resize}getRenderOffset(){return this._renderOffset}setRenderOffset(e){this._renderOffset=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);class r extends i.Explosion{constructor(){super("explosionMiddle"),this.create("explosionMiddle")}}t.ExplosionMiddle=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);class r extends i.Explosion{constructor(){super("explosionRight"),this.create("explosionRight")}}t.ExplosionRight=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);class r extends i.Explosion{constructor(){super("explosionTop"),this.create("explosionTop")}}t.ExplosionTop=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(14);class r extends i.Explosion{constructor(){super("explosionBottom"),this.create("explosionBottom")}}t.ExplosionBottom=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("destroyedWaterWall");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("destroyedWaterWall","destroyedWaterWall"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.DestoryedWaterWall=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("destroyedBrick");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("destroyedBrick","destroyedBrick"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.DestroyedBrick=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(2),s=n(4),a=n(0),o=n(3);class l extends i.GameEntity{constructor(){super("destroyedBush");let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new r.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("destroyedBush","destroyedBush"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new o.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.DestroyedBush=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(4),a=n(0),o=n(2),l=n(3),c=n(7);class d extends i.GameEntity{constructor(){super("bombUp"),this.addComponent(new r.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new o.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("bombUp","bombUp"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.BombUp=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(4),a=n(0),o=n(2),l=n(3),c=n(7);class d extends i.GameEntity{constructor(){super("explosionUp"),this.addComponent(new r.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new o.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("explosionUp","explosionUp"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.ExplosionUp=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(4),a=n(0),o=n(2),l=n(3),c=n(7);class d extends i.GameEntity{constructor(){super("shieldUp"),this.addComponent(new r.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new o.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("shieldUp","shieldUp"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.SheildUp=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(4),a=n(0),o=n(2),l=n(3),c=n(7);class d extends i.GameEntity{constructor(){super("skull"),this.addComponent(new r.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new o.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("skull","skull"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.Skull=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(5),s=n(4),a=n(0),o=n(2),l=n(3),c=n(7);class d extends i.GameEntity{constructor(){super("speedUp"),this.addComponent(new r.WallComponent),this.addComponent(new c.DestructibleComponent);let e=a.SpriteSheetManager.getInstance().getSpriteSheet("level"),t=new o.AnimatedSprite(a.SpriteSheetManager.getInstance().getSpriteSheet("level"));t.addSprite(e.getSprite("speedUp","speedUp"));let n=new s.AnimationComponent;n.setAnimatedSprite("down",t),this.addComponent(n);let i=new l.DirectionComponent;i.setDirection("down"),this.addComponent(i)}}t.SpeedUp=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(2),a=n(3);class o extends i.GameEntity{constructor(){super("smokeParticle");let e=r.SpriteSheetManager.getInstance().getSpriteSheet("level");new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("level")).addSprite(e.getSprite("particle","particle"));let t=new a.DirectionComponent;t.setDirection("down"),this.addComponent(t)}}t.SmokeParticle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(2),a=n(3);class o extends i.GameEntity{constructor(){super("grassParticle");let e=r.SpriteSheetManager.getInstance().getSpriteSheet("level");new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("level")).addSprite(e.getSprite("particle","particle"));let t=new a.DirectionComponent;t.setDirection("down"),this.addComponent(t)}}t.GrassParticle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(2),a=n(3);class o extends i.GameEntity{constructor(){super("mistParticle");let e=r.SpriteSheetManager.getInstance().getSpriteSheet("level");new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("level")).addSprite(e.getSprite("particle","particle"));let t=new a.DirectionComponent;t.setDirection("down"),this.addComponent(t)}}t.MistParticles=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(2),a=n(3);class o extends i.GameEntity{constructor(){super("rainParticle");let e=r.SpriteSheetManager.getInstance().getSpriteSheet("level");new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("level")).addSprite(e.getSprite("particle","particle"));let t=new a.DirectionComponent;t.setDirection("down"),this.addComponent(t)}}t.RainParticle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(2),a=n(3);class o extends i.GameEntity{constructor(){super("winningParticle");let e=r.SpriteSheetManager.getInstance().getSpriteSheet("level");new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("level")).addSprite(e.getSprite("particle","particle"));let t=new a.DirectionComponent;t.setDirection("down"),this.addComponent(t)}}t.WinningParticle=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1),r=n(0),s=n(2),a=n(3);class o extends i.GameEntity{constructor(){super("losingParticle");let e=r.SpriteSheetManager.getInstance().getSpriteSheet("level");new s.AnimatedSprite(r.SpriteSheetManager.getInstance().getSpriteSheet("level")).addSprite(e.getSprite("particle","particle"));let t=new a.DirectionComponent;t.setDirection("down"),this.addComponent(t)}}t.LosingParticles=o},function(e,t,n){(function(e,n){var i=200,r="__lodash_hash_undefined__",s=9007199254740991,a="[object Arguments]",o="[object Boolean]",l="[object Date]",c="[object Function]",d="[object GeneratorFunction]",p="[object Map]",h="[object Number]",u="[object Object]",g="[object RegExp]",m="[object Set]",f="[object String]",y="[object Symbol]",_="[object ArrayBuffer]",S="[object DataView]",w="[object Float32Array]",v="[object Float64Array]",b="[object Int8Array]",C="[object Int16Array]",x="[object Int32Array]",M="[object Uint8Array]",I="[object Uint8ClampedArray]",P="[object Uint16Array]",E="[object Uint32Array]",A=/\w*$/,O=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,G={};G[a]=G["[object Array]"]=G[_]=G[S]=G[o]=G[l]=G[w]=G[v]=G[b]=G[C]=G[x]=G[p]=G[h]=G[u]=G[g]=G[m]=G[f]=G[y]=G[M]=G[I]=G[P]=G[E]=!0,G["[object Error]"]=G[c]=G["[object WeakMap]"]=!1;var j="object"==typeof e&&e&&e.Object===Object&&e,D="object"==typeof self&&self&&self.Object===Object&&self,Y=j||D||Function("return this")(),X=t&&!t.nodeType&&t,k=X&&"object"==typeof n&&n&&!n.nodeType&&n,B=k&&k.exports===X;function N(e,t){return e.set(t[0],t[1]),e}function W(e,t){return e.add(t),e}function L(e,t,n,i){var r=-1,s=e?e.length:0;for(i&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n}function T(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function U(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function F(e,t){return function(n){return e(t(n))}}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var H,z=Array.prototype,K=Function.prototype,$=Object.prototype,J=Y["__core-js_shared__"],q=(H=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",Q=K.toString,Z=$.hasOwnProperty,ee=$.toString,te=RegExp("^"+Q.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=B?Y.Buffer:void 0,ie=Y.Symbol,re=Y.Uint8Array,se=F(Object.getPrototypeOf,Object),ae=Object.create,oe=$.propertyIsEnumerable,le=z.splice,ce=Object.getOwnPropertySymbols,de=ne?ne.isBuffer:void 0,pe=F(Object.keys,Object),he=ke(Y,"DataView"),ue=ke(Y,"Map"),ge=ke(Y,"Promise"),me=ke(Y,"Set"),fe=ke(Y,"WeakMap"),ye=ke(Object,"create"),_e=Te(he),Se=Te(ue),we=Te(ge),ve=Te(me),be=Te(fe),Ce=ie?ie.prototype:void 0,xe=Ce?Ce.valueOf:void 0;function Me(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ee(e){this.__data__=new Ie(e)}function Ae(e,t){var n=Fe(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ve(e)}(e)&&Z.call(e,"callee")&&(!oe.call(e,"callee")||ee.call(e)==a)}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],i=n.length,r=!!i;for(var s in e)!t&&!Z.call(e,s)||r&&("length"==s||We(s,i))||n.push(s);return n}function Oe(e,t,n){var i=e[t];Z.call(e,t)&&Ue(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function Re(e,t){for(var n=e.length;n--;)if(Ue(e[n][0],t))return n;return-1}function Ge(e,t,n,i,r,s,O){var R;if(i&&(R=s?i(e,r,s,O):i(e)),void 0!==R)return R;if(!Ke(e))return e;var j=Fe(e);if(j){if(R=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&Z.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,i=e.length;t||(t=Array(i));for(;++n<i;)t[n]=e[n];return t}(e,R)}else{var D=Ne(e),Y=D==c||D==d;if(He(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if(D==u||D==a||Y&&!s){if(T(e))return s?e:{};if(R=function(e){return"function"!=typeof e.constructor||Le(e)?{}:(t=se(e),Ke(t)?ae(t):{});var t}(Y?{}:e),!t)return function(e,t){return Ye(e,Be(e),t)}(e,function(e,t){return e&&Ye(t,$e(t),e)}(R,e))}else{if(!G[D])return s?e:{};R=function(e,t,n,i){var r=e.constructor;switch(t){case _:return De(e);case o:case l:return new r(+e);case S:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,i);case w:case v:case b:case C:case x:case M:case I:case P:case E:return function(e,t){var n=t?De(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,i);case p:return function(e,t,n){return L(t?n(U(e),!0):U(e),N,new e.constructor)}(e,i,n);case h:case f:return new r(e);case g:return function(e){var t=new e.constructor(e.source,A.exec(e));return t.lastIndex=e.lastIndex,t}(e);case m:return function(e,t,n){return L(t?n(V(e),!0):V(e),W,new e.constructor)}(e,i,n);case y:return s=e,xe?Object(xe.call(s)):{}}var s}(e,D,Ge,t)}}O||(O=new Ee);var X=O.get(e);if(X)return X;if(O.set(e,R),!j)var k=n?function(e){return function(e,t,n){var i=t(e);return Fe(e)?i:function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}(i,n(e))}(e,$e,Be)}(e):$e(e);return function(e,t){for(var n=-1,i=e?e.length:0;++n<i&&!1!==t(e[n],n,e););}(k||e,(function(r,s){k&&(r=e[s=r]),Oe(R,s,Ge(r,t,n,i,s,e,O))})),R}function je(e){return!(!Ke(e)||(t=e,q&&q in t))&&(ze(e)||T(e)?te:O).test(Te(e));var t}function De(e){var t=new e.constructor(e.byteLength);return new re(t).set(new re(e)),t}function Ye(e,t,n,i){n||(n={});for(var r=-1,s=t.length;++r<s;){var a=t[r],o=i?i(n[a],e[a],a,n,e):void 0;Oe(n,a,void 0===o?e[a]:o)}return n}function Xe(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function ke(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return je(n)?n:void 0}Me.prototype.clear=function(){this.__data__=ye?ye(null):{}},Me.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Me.prototype.get=function(e){var t=this.__data__;if(ye){var n=t[e];return n===r?void 0:n}return Z.call(t,e)?t[e]:void 0},Me.prototype.has=function(e){var t=this.__data__;return ye?void 0!==t[e]:Z.call(t,e)},Me.prototype.set=function(e,t){return this.__data__[e]=ye&&void 0===t?r:t,this},Ie.prototype.clear=function(){this.__data__=[]},Ie.prototype.delete=function(e){var t=this.__data__,n=Re(t,e);return!(n<0)&&(n==t.length-1?t.pop():le.call(t,n,1),!0)},Ie.prototype.get=function(e){var t=this.__data__,n=Re(t,e);return n<0?void 0:t[n][1]},Ie.prototype.has=function(e){return Re(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var n=this.__data__,i=Re(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},Pe.prototype.clear=function(){this.__data__={hash:new Me,map:new(ue||Ie),string:new Me}},Pe.prototype.delete=function(e){return Xe(this,e).delete(e)},Pe.prototype.get=function(e){return Xe(this,e).get(e)},Pe.prototype.has=function(e){return Xe(this,e).has(e)},Pe.prototype.set=function(e,t){return Xe(this,e).set(e,t),this},Ee.prototype.clear=function(){this.__data__=new Ie},Ee.prototype.delete=function(e){return this.__data__.delete(e)},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ie){var r=n.__data__;if(!ue||r.length<i-1)return r.push([e,t]),this;n=this.__data__=new Pe(r)}return n.set(e,t),this};var Be=ce?F(ce,Object):function(){return[]},Ne=function(e){return ee.call(e)};function We(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||R.test(e))&&e>-1&&e%1==0&&e<t}function Le(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$)}function Te(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ue(e,t){return e===t||e!=e&&t!=t}(he&&Ne(new he(new ArrayBuffer(1)))!=S||ue&&Ne(new ue)!=p||ge&&"[object Promise]"!=Ne(ge.resolve())||me&&Ne(new me)!=m||fe&&"[object WeakMap]"!=Ne(new fe))&&(Ne=function(e){var t=ee.call(e),n=t==u?e.constructor:void 0,i=n?Te(n):void 0;if(i)switch(i){case _e:return S;case Se:return p;case we:return"[object Promise]";case ve:return m;case be:return"[object WeakMap]"}return t});var Fe=Array.isArray;function Ve(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}(e.length)&&!ze(e)}var He=de||function(){return!1};function ze(e){var t=Ke(e)?ee.call(e):"";return t==c||t==d}function Ke(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $e(e){return Ve(e)?Ae(e):function(e){if(!Le(e))return pe(e);var t=[];for(var n in Object(e))Z.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return Ge(e,!0,!0)}}).call(this,n(78),n(79)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e){e.exports=JSON.parse('{"name":"Level 1","map":[1,3,3,1,3,3,3,3,1,3,3,3,3,3,3,3,3,3,1,1,0,0,3,0,0,0,0,2,0,6,7,0,0,0,1,4,0,1,1,0,0,2,0,0,0,0,11,0,4,6,0,0,0,2,0,0,1,1,3,8,3,0,0,0,0,2,4,0,1,0,0,0,1,8,1,1,1,0,0,0,0,3,0,0,8,0,0,3,0,0,1,2,0,0,1,1,0,4,0,0,8,0,0,9,9,9,0,4,0,3,5,0,0,1,1,0,0,0,0,3,0,0,0,4,0,2,2,0,0,0,0,0,1,1,2,3,9,9,2,2,2,5,5,5,5,3,2,8,2,9,9,1,1,5,5,0,0,3,0,0,0,6,7,0,0,0,0,0,0,0,1,1,6,7,4,0,0,2,3,2,3,3,2,3,4,0,0,0,0,1,1,3,3,3,2,9,0,0,0,0,0,2,0,0,0,1,0,3,1,1,0,11,3,0,0,0,0,1,0,0,0,0,0,0,8,0,0,1,1,0,0,8,0,0,0,0,1,0,4,1,0,0,0,1,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.MAIN_MENU=0]="MAIN_MENU",e[e.PLAYING=1]="PLAYING",e[e.VICTORY=2]="VICTORY",e[e.GAME_OVER=3]="GAME_OVER"}(t.GameMode||(t.GameMode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(31),s=n(34),a=n(96),o=n(100),l=n(101),c=n(102),d=n(9),p=n(21),h=n(33),u=n(15);t.Game=class{constructor(){this._players=[]}init(){this._particleSystem=new u.ParticleSystem,this._players.push(new a.WhitePlayer),this._players.push(new o.BlackPlayer),this._players.push(new l.RedPlayer),this._players.push(new c.BluePlayer),this._gameMap=i.GameMap.getInstance();for(let e=0;e<250;e++)i.GameMap.getInstance().addParticle(d.ParticleFactory.getParticle("rainParticle",null,null));this._backgroundParticles=[];for(let e=0;e<900;e++)this._backgroundParticles.push(d.ParticleFactory.getParticle("winningParticle",null,null))}reset(e){if(i.GameMap.getInstance().init(),this._players=[],e){let e=new a.WhitePlayer;e.removeComponent("ai"),this._players.push(e)}else this._players.push(new a.WhitePlayer);this._players.push(new o.BlackPlayer),this._players.push(new l.RedPlayer),this._players.push(new c.BluePlayer)}gameLoop(){let e=this._gameMap.getMap(),t=r.SystemManager.getInstance().getSystems();for(let e=0;e<this._backgroundParticles.length;e++)this._particleSystem.process(this._backgroundParticles[e]);this.processEntities("tile",e,t),this.processEntities("item",e,t),this.processEntities("decal",e,t);for(let e=0;e<this._players.length;e++)for(let n=0;n<t.length;n++)t[n].process(this._players[e]);let n=i.GameMap.getInstance().getParticles();for(let e=0;e<n.length;e++){let i=n[e];if(null!=i)for(let e=0;e<t.length;e++)t[e].process(i)}}processEntities(e,t,n){for(let i=0;i<t.get(e).length;i++){let r=t.get(e)[i];if(null!=r)for(let e=0;e<n.length;e++)n[e].process(r)}}keyboard(e){let t=this._players[0].getComponent("speed"),n=this._players[0].getComponent("velocity"),i=this._players[0].getComponent("direction"),r=0,a=0;if(e.payload==p.KeyboardInput.LEFT)r=-1*t.getSpeed(),i.setDirection("left");else if(e.payload==p.KeyboardInput.RIGHT)r=t.getSpeed(),i.setDirection("right");else if(e.payload==p.KeyboardInput.UP)a=-1*t.getSpeed(),i.setDirection("up");else if(e.payload==p.KeyboardInput.DOWN)a=t.getSpeed(),i.setDirection("down");else if(e.payload==p.KeyboardInput.SPACE){let e=new h.AttackComponent;this._players[0].addComponent(e),s.AudioManager.getInstance().play("music")}n.setVelX(r),n.setVelY(a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(32),s=n(9),a=n(16);t.CollisionSystem=class{process(e){if(e.hasComponent("velocity")){let t=e.getComponent("velocity"),n=e.getComponent("position");if(0!=t.getVelX()||0!=t.getVelY()){let o=0,l=0;if(t.getVelX()>0?o=1:t.getVelX()<0&&(o=-1),t.getVelY()>0?l=1:t.getVelY()<0&&(l=-1),!i.GameMap.getInstance().isWall(n.getX()+o,n.getY()+l)){if(2==a.getRandomInt(2))for(let e=0;e<50;e++){let e=s.ParticleFactory.getParticle("grassParticle",n.getX(),n.getY());i.GameMap.getInstance().addParticle(e)}n.setX(n.getX()+o),n.setY(n.getY()+l);let t=new r.AnimateComponent;e.addComponent(t)}t.setVelX(0),t.setVelY(0)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RenderSystem=class{constructor(){this._canvas=document.getElementById("canvas"),this._ctx=this._canvas.getContext("2d")}process(e){if(e.hasComponent("animation")){let t=e.getComponent("animation"),n=e.getComponent("position"),i=e.getComponent("direction");e.hasComponent("renderPosition")?(t.getAnimatedSprite(i.getDirection()).render(this._ctx,64*n.getX(),64*n.getY()),e.hasComponent("animate")&&(t.getAnimatedSprite(i.getDirection()).animate(),e.removeComponent("animate"))):(t.getAnimatedSprite(i.getDirection()).render(this._ctx,64*n.getX(),64*n.getY()),t.getAnimatedSprite(i.getDirection()).animate())}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(32);t.TimerSystem=class{process(e){if(e.hasComponent("timer")){let t=e.getComponent("timer");t.setTimer(t.getTimer()-1);let n=new i.AnimateComponent;e.addComponent(n),t.getTimer()<=0&&(e.removeComponent("timer"),e.removeComponent("animation"),void 0!==t&&t.getCallBack()(e))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(13),r=n(6),s=n(10),a=n(87);t.AttackSystem=class{process(e){if(e.hasComponent("attack")){let t=e.getComponent("position"),n=t.getX(),o=t.getY();if(!r.GameMap.getInstance().getGameEntity("tile",n,o).hasComponent("wall")){let t=e.getComponent("inventory");if(0==t.getCurrentItems())return;t.setCurrentItems(t.getCurrentItems()-1);let l=s.EntityManager.getInstance().getEntity("bomb"),c=new i.PositionComponent;c.setX(n),c.setY(o),l.addComponent(c);let d=new a.OwnerComponent;d.setOwner(e.getName()),l.addComponent(d),r.GameMap.getInstance().setGameEntity("item",n,o,l)}e.removeComponent("attack")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OwnerComponent=class{constructor(){}name(){return"owner"}setOwner(e){this._owner=e}getOwner(){return this._owner}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(10),s=n(89),a=n(12),o=n(8);t.DamageSystem=class{process(e){if(e.hasComponent("damage")){let t=e.getComponent("position"),n=i.GameMap.getInstance().getGameEntity("item",t.getX(),t.getY());if(null!=n&&"crate"===n.getName()){console.log("create destroy");let e=["bombUp","explosionUp","shieldUp","skull","speedUp"],s=e[Math.floor(Math.random()*e.length)];console.info(n.getName());let a=r.EntityManager.getInstance().getEntity(s);i.GameMap.getInstance().setGameEntity("item",t.getX(),t.getY(),a)}this.killPlayer(t.getX(),t.getY()),e.removeComponent("damage"),e.removeComponent("futureDamage")}}killPlayer(e,t){let n=["whitePlayer","blackPlayer","redPlayer","bluePlayer"];for(let i=0;i<n.length;i++){let l=r.EntityManager.getInstance().getPlayer(n[i]);if(void 0!==l){if(l.hasComponent("dead"))continue;let n=l.getComponent("position");if(n.getX()==e&&n.getY()==t){l.addComponent(new s.DeadComponent),l.getComponent("direction").setDirection("dead"),"whitePlayer"===l.getName()?o.EventBus.getInstance().publish(new a.GameEvent("gameOver",null)):o.EventBus.getInstance().publish(new a.GameEvent("death",null))}}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DeadComponent=class{constructor(){}name(){return"dead"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(10),r=n(91),s=n(33),a=n(6),o=n(16);t.AiSystem=class{process(e){if(e.hasComponent("ai")&&!e.hasComponent("dead")){let t,n=e.getComponent("ai"),i=e.getComponent("position"),o=(e.getComponent("velocity"),e.getComponent("speed"),i.getX()),l=i.getY();if(this.hasNoValidEnemy(e))t=this.findNewEnemy(e),console.log(t);else{let n=e.getComponent("enemy");t=this.findEnemyPosition(n.getEnemyName())}if(null==t)return;let c=t.x,d=t.y,p=new r.AStar(o,l,c,d);if(p.isPathFound()){let t=p.getPath();if(0==t.length)return void e.addComponent(new s.AttackComponent);let r=t[t.length-1];if(null!=a.GameMap.getInstance().getGameEntity("item",r.getX(),r.getY()))return void e.addComponent(new s.AttackComponent);(new Date).getTime()>n.getLastMove()+250&&(i.setX(t[t.length-1].getX()),i.setY(t[t.length-1].getY()),n.updateMove())}}}findEnemyPosition(e){let t=i.EntityManager.getInstance().getPlayer(e).getComponent("position"),n=t.getX(),r=t.getY();for(let e=r-1;e<r+1;e++)for(let t=n-1;t<n+1;t++)if((t!=n||e!=r)&&!a.GameMap.getInstance().isWall(t,e))return{x:t,y:e};return null}findNewEnemy(e){let t=["whitePlayer","blackPlayer","redPlayer","blackPlayer"],n=[];for(let i=0;i<t.length;i++)t[i]!==e.getName()&&n.push(t[i]);let i=n[o.getRandomArrayElement(n)];return e.getComponent("enemy").setEnemyName(i),this.findEnemyPosition(i)}hasNoValidEnemy(e){return null===e.getComponent("enemy").getEnemyName()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),r=n(92);t.AStar=class{constructor(e,t,n,s){this._gameMap=i.GameMap.getInstance(),this._closedSet=new Map,this._openSet=new Map,this._path=new Array,this._currentNode=new r.PathNode(0,0),this._startX=e,this._startY=t,this._endX=n,this._endY=s;let a=this._gameMap.translateCoordinatesToIdx(e,t),o=new r.PathNode(e,t);o.setIdx(a),o.setParent(0),o.setG(0),o.setH(this.getManhattanDistance(o.getX(),o.getY())),o.setF(o.getG()+o.getH()),this._openSet.set(a,o)}getManhattanDistance(e,t){return 10*(Math.abs(e-this._endX)+Math.abs(t-this._endY))}isOnClosedList(e){for(let[t,n]of this._closedSet)if(n.getIdx()==e)return!0;return!1}isOnOpenedList(e){for(let[t,n]of this._openSet)if(n.getIdx()==e)return!0;return!1}addToOpenedList(e){this._openSet.set(e.getIdx(),e)}addToClosedList(e,t){this._closedSet.set(e,t)}findLowestCost(){let e=99999,t=0;for(let[n,i]of this._openSet)i.getF()<=e&&(e=i.getF(),t=i.getIdx());let n=this._openSet.get(t);return this._openSet.delete(t),n}calculateGValue(e,t){if(e==this._currentNode.getX()-1&&t==this._currentNode.getY()){let e=i.GameMap.getInstance().getGameEntity("item",this._currentNode.getX()-1,this._currentNode.getY());return this.getTileWeight(e)}if(e==this._currentNode.getX()+1&&t==this._currentNode.getY()){let e=i.GameMap.getInstance().getGameEntity("item",this._currentNode.getX()+1,this._currentNode.getY());return this.getTileWeight(e)}if(e==this._currentNode.getX()&&t==this._currentNode.getY()+1){let e=i.GameMap.getInstance().getGameEntity("item",this._currentNode.getX(),this._currentNode.getY()+1);return this.getTileWeight(e)}if(e==this._currentNode.getX()&&t==this._currentNode.getY()-1){let e=i.GameMap.getInstance().getGameEntity("item",this._currentNode.getX(),this._currentNode.getY()-1);return this.getTileWeight(e)}return 1400}getTileWeight(e){return null==e?10:e.hasComponent("destructible")?"crate"==e.getName()?5:"bomb"==e.getName()?1e5:15:10}buildNodeList(){for(let e=this._currentNode.getY()+1;e>=this._currentNode.getY()-1;e--)for(let t=this._currentNode.getX()-1;t<this._currentNode.getX()+2;t++)if((t!=this._currentNode.getX()||e!=this._currentNode.getY())&&e>=0&&t>=0&&t<this._gameMap.getWidth()-1&&e<this._gameMap.getHeight()-1&&!i.GameMap.getInstance().canDestroy(t,e)&&!i.GameMap.getInstance().hasComponent("damage",t,e)&&!i.GameMap.getInstance().hasComponent("futureDamage",t,e)&&!i.GameMap.getInstance().isItemPresent("bomb",t,e)){let n=this._currentNode.getG()+this.calculateGValue(t,e),s=i.GameMap.getInstance().translateCoordinatesToIdx(t,e);if(this.isOnOpenedList(s)&&n<this._openSet.get(s).getG())this._openSet.get(s).setG(n),this._openSet.get(s).setF(this._openSet.get(s).getG()+this._openSet.get(s).getH()),this._openSet.get(s).setParent(this._currentNode.getIdx());else{if(this.isOnClosedList(s))continue;if(!this.isOnOpenedList(s)){let i=new r.PathNode(0,0);i.setG(n),i.setX(t),i.setY(e),i.setH(this.getManhattanDistance(t,e)),i.setIdx(s),i.setParent(this._currentNode.getIdx()),i.setF(i.getG()+i.getH()),this.addToOpenedList(i)}}}}buildRoute(){let e=i.GameMap.getInstance().translateCoordinatesToIdx(this._startX,this._startY),t=i.GameMap.getInstance().translateCoordinatesToIdx(this._endX,this._endY);for(;t!=e;)this._path.push(this._closedSet.get(t)),t=this._closedSet.get(t).getParent()}getPath(){return this._path}isPathFound(){let e=!1;for(;0!=this._openSet.size;){if(this._currentNode=this.findLowestCost(),this.addToClosedList(this._currentNode.getIdx(),this._currentNode),this._currentNode.getIdx()==i.GameMap.getInstance().translateCoordinatesToIdx(this._endX,this._endY)){this.buildRoute(),e=!0;break}this.buildNodeList()}return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PathNode=class{constructor(e,t){this._x=e,this._y=t}getX(){return this._x}setX(e){this._x=e}getY(){return this._y}setY(e){this._y=e}getIdx(){return this._idx}setIdx(e){this._idx=e}getParent(){return this._parent}setParent(e){this._parent=e}getG(){return this._g}setG(e){this._g=e}getH(){return this._h}setH(e){this._h=e}getF(){return this._f}setF(e){this._f=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AudioFile=class{constructor(e,t){this._audio=new Audio(e),this._audio.loop=t}isLooped(){return this._audio.loop}play(){this._audio.paused||this._audio.pause(),this._audio.play()}pause(){this._audio.pause()}stop(){this._audio.pause(),this._audio.currentTime=0}}},function(e,t,n){e.exports=n.p+"a23325adee35a059f8b23c084f23c42a.ogg"},function(e,t,n){e.exports=n.p+"10e57d000d59c037ace218f23bced9ac.ogg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),r=n(19),s=n(20);class a extends i.Player{constructor(){super("whitePlayer");let e=this.getComponent("position");e.setX(4),e.setY(5),this.addComponent(new r.AiComponent),this.addComponent(new s.EnemyComponent)}}t.WhitePlayer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SpeedComponent=class{constructor(){this._speed=0}name(){return"speed"}setSpeed(e){this._speed=e}getSpeed(){return this._speed}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RenderPositionComponent=class{constructor(){this._x=0,this._y=0}name(){return"renderPosition"}setX(e){this._x=e}setY(e){this._y=e}getX(){return this._x}getY(){return this._y}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.InventoryComponent=class{constructor(){this._maxItems=1,this._currentItems=1}name(){return"inventory"}getMaxItems(){return this._maxItems}setMaxItems(e){this._maxItems=e}getCurrentItems(){return this._currentItems}setCurrentItems(e){this._currentItems=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),r=n(19),s=n(20);class a extends i.Player{constructor(){super("blackPlayer");let e=this.getComponent("position");e.setX(17),e.setY(12),this.addComponent(new r.AiComponent),this.addComponent(new s.EnemyComponent)}}t.BlackPlayer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),r=n(19),s=n(20);class a extends i.Player{constructor(){super("redPlayer");let e=this.getComponent("position");e.setX(1),e.setY(12),this.addComponent(new r.AiComponent),this.addComponent(new s.EnemyComponent)}}t.RedPlayer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),r=n(19),s=n(20);class a extends i.Player{constructor(){super("bluePlayer");let e=this.getComponent("position");e.setX(17),e.setY(1),this.addComponent(new r.AiComponent),this.addComponent(new s.EnemyComponent)}}t.BluePlayer=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8),r=n(12),s=n(0),a=n(31),o=n(34),l=n(11);t.Application=class{constructor(){s.SpriteSheetManager.getInstance(),a.SystemManager.getInstance(),o.AudioManager.getInstance(),document.addEventListener("keydown",e=>{i.EventBus.getInstance().publish(new r.GameEvent("keyboardEvent",e.keyCode))})}resize(){l.Renderer.getInstance().resize()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(12),r=n(22),s=n(9),a=n(15),o=n(11),l=n(17),c=n(8),d=n(21),p=n(105),h=n(23);class u extends r.OverLayBase{constructor(){super(),this.init()}init(){this.enable(),this._particles=new Array,this._particleSystem=new a.ParticleSystem,this._bomberManFace=new Image,this._bomberManFace.src=p,this._logo=new Image,this._logo.src=h,this._color=new l.Color,this._color.setRed(255),this._color.setGreen(255),this._color.setBlue(255);for(let e=0;e<120;e++)this._particles.push(s.ParticleFactory.getParticle("winningParticle",null,null))}gameLoop(){for(let e=0;e<this._particles.length;e++)this._particleSystem.process(this._particles[e]);o.Renderer.getInstance().renderImage(this._bomberManFace,400,30,500,500),o.Renderer.getInstance().renderImage(this._logo,350,500,600,300),o.Renderer.getInstance().print("[ Press Enter ]",650,800,"Garamond",30,this._color)}keyboard(e){e.payload===d.KeyboardInput.ENTER&&c.EventBus.getInstance().publish(new i.GameEvent("startGame",null))}isActive(){return this.getActive()}disable(){this.setActive(!1)}enable(){this.setActive(!0)}}t.StartGame=u},function(e,t,n){e.exports=n.p+"4c3b252cc6b3ea566d81cd387857f7cb.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(12),r=n(22),s=n(9),a=n(15),o=n(11),l=n(17),c=n(8),d=n(21),p=n(107),h=n(23);class u extends r.OverLayBase{constructor(){super(),this.init()}init(){this._particles=new Array,this._particleSystem=new a.ParticleSystem,this._bomberManFace=new Image,this._bomberManFace.src=p,this._logo=new Image,this._logo.src=h,this._color=new l.Color,this._color.setRed(255),this._color.setGreen(255),this._color.setBlue(255);for(let e=0;e<120;e++)this._particles.push(s.ParticleFactory.getParticle("winningParticle",null,null))}gameLoop(){for(let e=0;e<this._particles.length;e++)this._particleSystem.process(this._particles[e]);o.Renderer.getInstance().renderImage(this._bomberManFace,400,30,500,500),o.Renderer.getInstance().renderImage(this._logo,350,500,600,300),o.Renderer.getInstance().print("[ Press Enter ]",650,800,"Garamond",30,this._color)}keyboard(e){e.payload===d.KeyboardInput.ENTER&&c.EventBus.getInstance().publish(new i.GameEvent("startGame",null))}isActive(){return this.getActive()}disable(){this.setActive(!1)}enable(){this.setActive(!0)}}t.Victory=u},function(e,t,n){e.exports=n.p+"f018c37ace06f06e309e4b7746d36945.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(12),r=n(22),s=n(9),a=n(15),o=n(11),l=n(17),c=n(8),d=n(21),p=n(109),h=n(23);class u extends r.OverLayBase{constructor(){super(),this.init()}init(){this._particles=new Array,this._particleSystem=new a.ParticleSystem,this._bomberManFace=new Image,this._bomberManFace.src=p,this._logo=new Image,this._logo.src=h,this._color=new l.Color,this._color.setRed(255),this._color.setGreen(255),this._color.setBlue(255);for(let e=0;e<120;e++)this._particles.push(s.ParticleFactory.getParticle("losingParticle",null,null))}gameLoop(){for(let e=0;e<this._particles.length;e++)this._particleSystem.process(this._particles[e]);o.Renderer.getInstance().renderImage(this._bomberManFace,400,30,500,500),o.Renderer.getInstance().renderImage(this._logo,350,500,600,300),o.Renderer.getInstance().print("[ Press Enter ]",650,800,"Garamond",30,this._color)}keyboard(e){e.payload===d.KeyboardInput.ENTER&&c.EventBus.getInstance().publish(new i.GameEvent("startGame",null))}isActive(){return this.getActive()}disable(){this.setActive(!1)}enable(){this.setActive(!0)}}t.GameOver=u},function(e,t,n){e.exports=n.p+"216fc7522f3d8c07f50f33c4f1b7c97a.png"},function(e,t,n){var i=n(111);"string"==typeof i&&(i=[[e.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(113)(i,r);i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(112)(!1)).push([e.i,"html, body {\n    overflow: hidden;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    background-color: rgb(0, 0, 0);\n}\n\ncanvas {\n    -webkit-tap-highlight-color: transparent;\n    background-color: rgb(0,0, 0);\n\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var r=(a=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(l," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot).concat(e," */")}));return[n].concat(s).concat([r]).join("\n")}var a,o,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];null!=s&&(i[s]=!0)}for(var a=0;a<e.length;a++){var o=e[a];null!=o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="(".concat(o[2],") and (").concat(n,")")),t.push(o))}},t}},function(e,t,n){var i,r,s={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),o=function(e,t){return t?t.querySelector(e):document.querySelector(e)},l=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var i=o.call(this,e,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),c=null,d=0,p=[],h=n(114);function u(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=s[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(S(i.parts[a],t))}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(S(i.parts[a],t));s[i.id]={id:i.id,refs:1,parts:o}}}}function g(e,t){for(var n=[],i={},r=0;r<e.length;r++){var s=e[r],a=t.base?s[0]+t.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};i[a]?i[a].parts.push(o):n.push(i[a]={id:a,parts:[o]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=p[p.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertAt.before,n);n.insertBefore(t,r)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function y(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var i=function(){0;return n.nc}();i&&(e.attrs.nonce=i)}return _(t,e.attrs),m(e,t),t}function _(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function S(e,t){var n,i,r,s;if(t.transform&&e.css){if(!(s="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=s}if(t.singleton){var a=d++;n=c||(c=y(t)),i=b.bind(null,n,a,!1),r=b.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",_(t,e.attrs),m(e,t),t}(t),i=x.bind(null,n,t),r=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),i=C.bind(null,n),r=function(){f(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=g(e,t);return u(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var a=n[r];(o=s[a.id]).refs--,i.push(o)}e&&u(g(e,t),t);for(r=0;r<i.length;r++){var o;if(0===(o=i[r]).refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete s[o.id]}}}};var w,v=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function b(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=v(t,r);else{var s=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function C(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function x(e,t,n){var i=n.css,r=n.sourceMap,s=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||s)&&(i=h(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,s=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?e:(r=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:i+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}}]);
//# sourceMappingURL=main.a5a5385fcaee3361f6aa.js.map